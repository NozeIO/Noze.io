language:  generic

notifications:
    slack: nozeio:LIFY1Jtkx0FRcLq3u1WliHRZ

matrix:
    include:
        - os:   osx
          osx_image: xcode8.2

before_install:
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then rvm get head; fi
    - ./xcconfig/before-install.sh

install:
    - ./xcconfig/install.sh

script:
    - export PATH="$HOME/usr/bin:$PATH"
    - export SWIFTENV_ROOT="$HOME/.swiftenv"
    - export PATH="${SWIFTENV_ROOT}/bin:${SWIFTENV_ROOT}/shims:$PATH"
    - git tag 0.5.99
    - make all
#    - make samples
#    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then xcodebuild test -project Noze.io.xcodeproj -scheme "Working Tests" -destination 'platform=OS X,arch=x86_64' | xcpretty -f `xcpretty-travis-formatter` && exit ${PIPESTATUS[0]}; fi
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then xcodebuild test -project Noze.io.xcodeproj -scheme "Working Tests" -destination 'platform=OS X,arch=x86_64'; fi
